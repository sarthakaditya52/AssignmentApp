"use strict";var express=require("express"),router=express.Router(),config=require("config"),bodyParser=require("body-parser");router.use(bodyParser.urlencoded({extended:!1})),router.use(bodyParser.json());var Assignment=require("../../model/Assignment"),Course=require("../../model/Course");router.get("/createAssignments",function(e,s){s.render("addAssignment")}),router.post("/createAssignments",function(t,r){var e=t.body,s=e.name;e.task,e.day;Course.findOne({name:s}).then(function(e,s){if(s)console.log(s);else if(e){assignment=new Assignment,assignment.task=t.body.task,assignment.day=t.body.day;for(var n=0;n<e.assignments.length;n++)e.assignments[n].day==t.body.day&&e.assignments.splice(n,1);e.assignments.push(assignment),e.assignments.sort(function(e,s){return e.day-s.day})}else assignment=new Assignment,(e=new Course).name=t.body.name,assignment.task=t.body.task,assignment.day=t.body.day,e.assignments.push(assignment);e.save(function(e){e?console.log(e):r.render("index",{title:"Assignment Added"})})})}),router.get("/Assignments",function(e,n){Course.find({},function(e,s){e?console.log(e):n.render("viewAssignments",{title:"Assignments",courses:s})})}),module.exports=router;